

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVENT INVITATION & RSVP</title>
    <link rel="stylesheet" href="index.css">
    <style>
        /* Contact Section Styles */
        .contact-section {
            padding: 2rem;
            max-width: 100%;
            margin: 0 auto;
            text-align: left;
            display: block !important;
        }
        .contact-section form {
            max-width: 600px;
            margin: 1em auto 0 auto;
            display: flex;
            flex-direction: column;
            gap: 0.7em;
        }
        .contact-section p {
            text-align: left;
            max-width: 600px;
            margin: 0 auto 1em auto;
        }

        /* Navbar Styles */
        .navbar {
            justify-content: center;
            position: relative;
        }
        .navbar-brand {
            position: absolute;
            left: 2rem;
            margin: 0;
        }
        .navbar-links {
            margin: 0;
            justify-content: center;
        }

        @media (max-width: 768px) {
            .contact-section {
                padding: 1rem;
            }
            .contact-section form {
                max-width: 100%;
            }
            .navbar-brand {
                position: static;
                left: auto;
            }
            .navbar {
                flex-direction: column;
                gap: 1rem;
            }
            .navbar-links {
                margin: 0;
            }
        }

        /* Login Modal Styles */
        .login-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .login-modal-overlay.active {
            display: flex;
        }
        .login-section {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            max-width: 400px;
            width: 90%;
            position: relative;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .login-modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        .login-section form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .login-section label {
            font-weight: bold;
        }
        .login-section input {
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .login-section button {
            background: #007bff;
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 4px;
            cursor: pointer;
        }
        .login-section button:hover {
            background: #0056b3;
        }
        .login-message {
            margin-top: 1rem;
            padding: 0.5rem;
            border-radius: 4px;
            display: none;
        }
        .login-message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .login-message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .login-link {
            text-align: center;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        .login-link a {
            color: #007bff;
            text-decoration: none;
        }

        /* Social Login Buttons */
        .google-signin {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            background: #4285f4;
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
        }
        .google-signin:hover {
            background: #3367d6;
        }
        .google-signin img {
            width: 18px;
            height: 18px;
        }
        .github-signin {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            background: #24292e;
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            text-decoration: none;
        }
        .github-signin:hover {
            background: #1a1f23;
        }
        .github-signin img {
            width: 18px;
            height: 18px;
        }
        .microsoft-signin {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            background: #0078d4;
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            text-decoration: none;
        }
        .microsoft-signin:hover {
            background: #106ebe;
        }
        .microsoft-signin img {
            width: 18px;
            height: 18px;
        }
        .divider {
            text-align: center;
            margin: 1rem 0;
            position: relative;
        }
        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #ddd;
        }
        .divider span {
            background: white;
            padding: 0 1rem;
            color: #666;
        }
        .social-logins {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* Registration Modal Styles */
        .register-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .register-modal-overlay.active {
            display: flex;
        }
        .register-section {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            max-width: 400px;
            width: 90%;
            position: relative;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .register-modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        .register-section form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .register-section label {
            font-weight: bold;
        }
        .register-section input {
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .register-section button {
            background: #28a745;
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 4px;
            cursor: pointer;
        }
        .register-section button:hover {
            background: #218838;
        }
        .register-message {
            margin-top: 1rem;
            padding: 0.5rem;
            border-radius: 4px;
            display: none;
        }
        .register-message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .register-message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .register-link {
            text-align: center;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        .register-link a {
            color: #007bff;
            text-decoration: none;
        }

        /* Login Required Overlay */
        .login-required-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            flex-direction: column;
            text-align: center;
            color: white;
        }
        .login-required-overlay.hidden {
            display: none;
        }
        .login-required-overlay h2 {
            margin-bottom: 1rem;
        }
        .login-required-overlay p {
            margin-bottom: 2rem;
            max-width: 400px;
        }
        .login-required-overlay button {
            background: #007bff;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }
        .login-required-overlay button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <!-- Login Required Overlay -->
    <div class="login-required-overlay" id="login-required-overlay">
        <h2>Welcome to Event RSVP!</h2>
        <p>Please log in to your account to access events and start RSVPing. If you don't have an account, you can register during the login process.</p>
        <button onclick="openLoginModal()">Login or Register</button>
    </div>

    <div class="universe" aria-hidden="true">
        <div class="stars"></div>
        <div class="sun"></div>
        <div class="orbit"><div class="earth"></div></div>
    </div>

    <nav class="navbar">
        <div class="navbar-brand">Event RSVP</div>
        <ul class="navbar-links">
            <li><a href="#events" class="nav-link nav-home active">Home</a></li>
            <li><a href="#about" class="nav-link nav-about">About</a></li>
            <li><a href="#contact" class="nav-link nav-contact">Contact</a></li>
            <li><a href="#login" class="nav-link nav-login">Login</a></li>
        </ul>
    </nav>

    <main class="main-content" id="main-content" style="display: none;">
        <section class="event-cards" id="events">
            <!-- Event Cards Here - Keeping as is for brevity -->
            <div class="event-card" data-event="culture">
                <img src="https://images.unsplash.com/photo-1511285560929-80b456fea0bc?ixlib=rb-4.0.3&w=100&h=100&fit=crop&q=80" alt="Vibrant cultural festival celebration" width="100px" height="100px" style="border-radius: 100%;">
                <h2>Culture Gala 2026</h2>
                <p><strong>Date:</strong> October 8, 2026<br>
                <strong>Time:</strong> 7:00 PM - 11:00 PM<br>
                <strong>Location:</strong> Graduation Square<br>
                <strong>Capacity:</strong> 500 guests<br>
                <strong>Ticket Price:</strong> $25 (General Admission)</p>
                <p>Celebrate world cultures with music, dance, and vibrant performances from around the globe. Highlights include live folk dances from Asia, Latin American rhythms, African drumming sessions, and international cuisine tasting.</p>
                <div class="event-video">
                    <h3>Event Recap Video</h3>
                    <iframe width="100%" height="200" src="https://www.youtube.com/embed/cPk1o_4TkGE" title="2025 World Cultural Dance Festival Promotional Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                </div>
                <ul class="event-highlights">
                    <li>üé≠ Featured Performers: International Dance Ensemble & Global Music Collective</li>
                    <li>‚úÇ Interactive Workshops: Cultural Craft Making & Language Taster Sessions</li>
                    <li>ü§ù Networking Mixer: Connect with cultural enthusiasts and experts</li>
                </ul>
                <button class="book-btn">Book</button>
            </div>
            <!-- Other event cards... (omitted for brevity, but include all in full code) -->
        </section>

        <!-- RSVP Modal -->
        <div class="rsvp-modal-overlay" id="rsvp-modal">
            <section class="rsvp-section" id="rsvp-section" style="display:none;">
                <button class="rsvp-modal-close" id="rsvp-close" title="Close">&times;</button>
                <h2 id="rsvp-event-name"></h2>
                <form id="rsvp-form" autocomplete="off">
                    <label for="name">Your Name:</label>
                    <input type="text" id="name" name="name" required>
                    <label for="attending">Will you attend?</label>
                    <select id="attending" name="attending" required>
                        <option value="">Select</option>
                        <option value="yes">Yes, I'll be there!</option>
                        <option value="no">Sorry, can't make it</option>
                    </select>
                    <button class="book-btn">Book</button>
                </form>
                <div id="rsvp-message" class="rsvp-message" style="display:none;"></div>
            </section>
        </div>

        <!-- Login Modal -->
        <div class="login-modal-overlay" id="login-modal">
            <section class="login-section" id="login-section">
                <button class="login-modal-close" id="login-close" title="Close">&times;</button>
                <h2>Login to Your Account</h2>
                <div id="g_id_onload"
                     data-client_id="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
                     data-callback="handleGoogleLogin"
                     data-auto_prompt="false">
                </div>
                <div class="g_id_signin" data-type="standard"></div>
                <a href="#" id="github-signin-btn" class="github-signin">
                    <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub">
                    Sign in with GitHub
                </a>
                <a href="#" id="microsoft-signin-btn" class="microsoft-signin">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Microsoft_logo.svg/18px-Microsoft_logo.svg.png" alt="Microsoft">
                    Sign in with Microsoft
                </a>
                <div class="divider">
                    <span>or</span>
                </div>
                <form id="login-form" autocomplete="off">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password" required>
                    <button type="submit">Login</button>
                </form>
                <div id="login-message" class="login-message"></div>
                <div class="login-link">
                    <a href="#" id="register-link">Don't have an account? Register here</a>
                </div>
            </section>
        </div>

        <!-- Registration Modal -->
        <div class="register-modal-overlay" id="register-modal">
            <section class="register-section" id="register-section">
                <button class="register-modal-close" id="register-close" title="Close">&times;</button>
                <h2>Create Your Account</h2>
                <form id="register-form" autocomplete="off">
                    <label for="reg-email">Email:</label>
                    <input type="email" id="reg-email" name="reg-email" required>
                    <label for="reg-password">Password:</label>
                    <input type="password" id="reg-password" name="reg-password" required minlength="6">
                    <button type="submit">Register</button>
                </form>
                <div id="register-message" class="register-message"></div>
                <div class="register-link">
                    <a href="#" id="login-link">Already have an account? Login here</a>
                </div>
            </section>
        </div>

        <!-- About Section -->
        <section class="about-section" id="about" style="display:none;">
            <h2>About</h2>
            <p>Welcome to our event platform! Book and RSVP for the best events in town. We bring together culture, worship, and technology in one place for your convenience and joy. Now featuring virtual events for global accessibility!</p>
            <ul style="text-align:left;max-width:400px;margin:1em auto 0 auto;">
                <li>Easy event booking</li>
                <li>Instant RSVP confirmation</li>
                <li>Modern, responsive design</li>
                <li>Secure and private</li>
                <li>Hybrid & Virtual Options</li>
            </ul>
        </section>

        <!-- Contact Section -->
        <section class="contact-section" id="contact" style="display:none;">
            <h2>Contact</h2>
            <p>Email: <a href="mailto:indekeja@yahoo.com">indekeja@yahoo.com</a><br>Phone: +255748815338</p>
            <form id="contact-form" style="margin-top:1em;display:flex;flex-direction:column;gap:0.7em;max-width:600px;margin-left:auto;margin-right:auto;">
                <label for="contact-name">Your Name:</label>
                <input type="text" id="contact-name" name="contact-name" required>
                <label for="contact-message">Message:</label>
                <textarea id="contact-message" name="contact-message" rows="3" required></textarea>
                <button type="submit">Send Message</button>
                <div id="contact-success" style="display:none;color:#4caf50;font-weight:bold;margin-top:0.5em;">Thank you for contacting us!</div>
            </form>
        </section>
    </main>

    <!-- Google Identity Services Script -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script>
        // Configuration
        const GITHUB_CLIENT_ID = 'YOUR_GITHUB_CLIENT_ID';
        const GITHUB_REDIRECT_URI = window.location.origin + window.location.pathname;
        const MICROSOFT_CLIENT_ID = 'YOUR_MICROSOFT_CLIENT_ID';
        const MICROSOFT_TENANT = 'common';
        const MICROSOFT_REDIRECT_URI = window.location.origin + window.location.pathname;
        const DEMO_EMAIL = 'email@test.com';
        const DEMO_PASSWORD = 'password123';
        let USERS = JSON.parse(localStorage.getItem('users') || '[]');

        // Utility Functions
        function isLoggedIn() {
            return localStorage.getItem('user') !== null;
        }

        function showMainContent() {
            document.getElementById('main-content').style.display = 'block';
            document.getElementById('login-required-overlay').classList.add('hidden');
        }

        function hideMainContent() {
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('login-required-overlay').classList.remove('hidden');
        }

        function generateCodeVerifier() {
            const array = new Uint8Array(32);
            crypto.getRandomValues(array);
            return btoa(String.fromCharCode(...array)).replace(/\+/g, '-').replace(/\//g, '_').replace(/=/g, '');
        }

        async function generateCodeChallenge(verifier) {
            const encoder = new TextEncoder();
            const data = encoder.encode(verifier);
            const digest = await crypto.subtle.digest('SHA-256', data);
            return btoa(String.fromCharCode(...new Uint8Array(digest)))
                .replace(/\+/g, '-').replace(/\//g, '_').replace(/=/g, '');
        }

        function showLoginError(message) {
            const loginMessage = document.getElementById('login-message');
            loginMessage.textContent = message;
            loginMessage.className = 'login-message error';
            loginMessage.style.display = 'block';
        }

        function showLoginSuccess(username, displayName, provider) {
            const loginMessage = document.getElementById('login-message');
            loginMessage.textContent = `Welcome back, ${displayName}! ${provider} login successful.`;
            loginMessage.className = 'login-message success';
            loginMessage.style.display = 'block';
            
            localStorage.setItem('user', JSON.stringify({name: displayName, username: username, provider: provider}));
            
            setTimeout(() => {
                closeLoginModal();
                const loginLink = document.querySelector('.nav-login');
                loginLink.textContent = `Welcome, ${displayName}`;
                loginLink.href = '#logout';
                loginLink.classList.remove('nav-login');
                loginLink.classList.add('nav-logout');
                showMainContent();
            }, 2000);
        }

        function showRegisterError(message) {
            const registerMessage = document.getElementById('register-message');
            registerMessage.textContent = message;
            registerMessage.className = 'register-message error';
            registerMessage.style.display = 'block';
        }

        function showRegisterSuccess(email, password) {
            const registerMessage = document.getElementById('register-message');
            registerMessage.textContent = `Account created successfully for ${email}! Logging you in...`;
            registerMessage.className = 'register-message success';
            registerMessage.style.display = 'block';
            
            setTimeout(() => {
                closeRegisterModal();
                document.getElementById('email').value = email;
                document.getElementById('password').value = password;
                document.getElementById('login-form').dispatchEvent(new Event('submit'));
            }, 1500);
        }

        // OAuth Callbacks
        async function handleGitHubCallback() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            const error = urlParams.get('error');
            if (error) {
                showLoginError(`GitHub login failed: ${error}`);
                return;
            }
            if (!code) return;

            const verifier = sessionStorage.getItem('github_code_verifier');
            if (!verifier) {
                showLoginError('GitHub login failed: No code verifier found');
                return;
            }

            try {
                const tokenResponse = await fetch('https://github.com/login/oauth/access_token', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'Accept': 'application/json',
                    },
                    body: new URLSearchParams({
                        client_id: GITHUB_CLIENT_ID,
                        code: code,
                        code_verifier: verifier,
                        redirect_uri: GITHUB_REDIRECT_URI,
                    }),
                });

                const tokenData = await tokenResponse.json();
                if (tokenData.error) {
                    throw new Error(tokenData.error_description || 'Token exchange failed');
                }

                const accessToken = tokenData.access_token;
                const userResponse = await fetch('https://api.github.com/user', {
                    headers: { 'Authorization': `Bearer ${accessToken}` },
                });
                if (!userResponse.ok) {
                    throw new Error('Failed to fetch user info');
                }
                const user = await userResponse.json();

                showLoginSuccess(user.login, user.name || user.login, 'GitHub');
                window.history.replaceState({}, document.title, window.location.pathname);
                sessionStorage.removeItem('github_code_verifier');
            } catch (err) {
                console.error('GitHub Login Error:', err);
                showLoginError('GitHub login failed: ' + err.message);
            }
        }

        async function handleMicrosoftCallback() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            const error = urlParams.get('error');
            if (error) {
                showLoginError(`Microsoft login failed: ${error}`);
                return;
            }
            if (!code) return;

            const verifier = sessionStorage.getItem('microsoft_code_verifier');
            if (!verifier) {
                showLoginError('Microsoft login failed: No code verifier found');
                return;
            }

            try {
                const tokenResponse = await fetch(`https://login.microsoftonline.com/${MICROSOFT_TENANT}/oauth2/v2.0/token`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: new URLSearchParams({
                        client_id: MICROSOFT_CLIENT_ID,
                        code: code,
                        code_verifier: verifier,
                        redirect_uri: MICROSOFT_REDIRECT_URI,
                        grant_type: 'authorization_code',
                        scope: 'openid profile email User.Read',
                    }),
                });

                const tokenData = await tokenResponse.json();
                if (tokenData.error) {
                    throw new Error(tokenData.error_description || 'Token exchange failed');
                }

                const accessToken = tokenData.access_token;
                const userResponse = await fetch('https://graph.microsoft.com/v1.0/me', {
                    headers: { 'Authorization': `Bearer ${accessToken}` },
                });
                if (!userResponse.ok) {
                    throw new Error('Failed to fetch user info');
                }
                const user = await userResponse.json();

                showLoginSuccess(user.userPrincipalName || user.mail, user.displayName || user.userPrincipalName, 'Microsoft');
                window.history.replaceState({}, document.title, window.location.pathname);
                sessionStorage.removeItem('microsoft_code_verifier');
            } catch (err) {
                console.error('Microsoft Login Error:', err);
                showLoginError('Microsoft login failed: ' + err.message);
            }
        }

        // Google Login Handler
        window.handleGoogleLogin = function(response) {
            try {
                const payload = JSON.parse(atob(response.credential.split('.')[1]));
                const userEmail = payload.email;
                const userName = payload.name;
                showLoginSuccess(userEmail, userName, 'Google');
            } catch (err) {
                console.error('Google Login Error:', err);
                showLoginError('Google login failed: Invalid token');
            }
        };

        // Document Ready
        document.addEventListener('DOMContentLoaded', function() {
            handleGitHubCallback();
            handleMicrosoftCallback();

            if (isLoggedIn()) {
                showMainContent();
                const user = JSON.parse(localStorage.getItem('user'));
                if (user) {
                    const loginLink = document.querySelector('.nav-login');
                    loginLink.textContent = `Welcome, ${user.name}`;
                    loginLink.href = '#logout';
                    loginLink.classList.remove('nav-login');
                    loginLink.classList.add('nav-logout');
                }
            } else {
                hideMainContent();
            }

            // Navigation
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = {
                home: document.getElementById('events'),
                about: document.getElementById('about'),
                contact: document.getElementById('contact')
            };

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    if (this.classList.contains('nav-login')) {
                        openLoginModal();
                        return;
                    }
                    
                    if (this.href === '#logout') {
                        localStorage.removeItem('user');
                        hideMainContent();
                        this.textContent = 'Login';
                        this.href = '#login';
                        this.classList.remove('nav-logout');
                        this.classList.add('nav-login');
                        return;
                    }
                    
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    Object.values(sections).forEach(section => {
                        section.style.display = 'none';
                    });
                    
                    const targetId = this.getAttribute('href').substring(1);
                    const targetSection = sections[targetId] || sections.home;
                    targetSection.style.display = 'block';
                    
                    if (targetSection !== sections.home) {
                        targetSection.classList.add('active');
                    } else {
                        sections.home.classList.remove('active');
                    }
                });
            });

            // Modal Handlers
            window.openLoginModal = function() {
                document.getElementById('login-modal').classList.add('active');
                document.getElementById('login-section').style.display = 'block';
            };

            function closeLoginModal() {
                document.getElementById('login-modal').classList.remove('active');
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('login-form').reset();
                document.getElementById('login-message').style.display = 'none';
            }

            document.getElementById('login-close').addEventListener('click', closeLoginModal);
            document.getElementById('login-modal').addEventListener('click', function(e) {
                if (e.target === this) closeLoginModal();
            });

            function openRegisterModal() {
                document.getElementById('register-modal').classList.add('active');
                document.getElementById('register-section').style.display = 'block';
                closeLoginModal();
            }

            function closeRegisterModal() {
                document.getElementById('register-modal').classList.remove('active');
                document.getElementById('register-section').style.display = 'none';
                document.getElementById('register-form').reset();
                document.getElementById('register-message').style.display = 'none';
            }

            document.getElementById('register-close').addEventListener('click', closeRegisterModal);
            document.getElementById('register-modal').addEventListener('click', function(e) {
                if (e.target === this) closeRegisterModal();
            });

            // Social Login Handlers
            document.getElementById('github-signin-btn').addEventListener('click', async function(e) {
                e.preventDefault();
                const verifier = generateCodeVerifier();
                const challenge = await generateCodeChallenge(verifier);
                sessionStorage.setItem('github_code_verifier', verifier);
                const state = generateCodeVerifier().substring(0, 16);
                sessionStorage.setItem('github_state', state);

                const params = new URLSearchParams({
                    client_id: GITHUB_CLIENT_ID,
                    redirect_uri: GITHUB_REDIRECT_URI,
                    scope: 'user',
                    state: state,
                    code_challenge: challenge,
                    code_challenge_method: 'S256',
                });

                window.location.href = `https://github.com/login/oauth/authorize?${params.toString()}`;
            });

            document.getElementById('microsoft-signin-btn').addEventListener('click', async function(e) {
                e.preventDefault();
                const verifier = generateCodeVerifier();
                const challenge = await generateCodeChallenge(verifier);
                sessionStorage.setItem('microsoft_code_verifier', verifier);
                const state = generateCodeVerifier().substring(0, 16);
                sessionStorage.setItem('microsoft_state', state);

                const params = new URLSearchParams({
                    client_id: MICROSOFT_CLIENT_ID,
                    response_type: 'code',
                    redirect_uri: MICROSOFT_REDIRECT_URI,
                    scope: 'openid profile email User.Read',
                    state: state,
                    code_challenge: challenge,
                    code_challenge_method: 'S256',
                    response_mode: 'query',
                });

                window.location.href = `https://login.microsoftonline.com/${MICROSOFT_TENANT}/oauth2/v2.0/authorize?${params.toString()}`;
            });

            // Form Handlers
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const email = formData.get('email');
                const password = formData.get('password');
                
                if (!email || !password) {
                    showLoginError('Please fill in all fields.');
                    return;
                }

                const user = USERS.find(u => u.email === email && u.password === password);
                if (user || (email === DEMO_EMAIL && password === DEMO_PASSWORD)) {
                    showLoginSuccess(email, email, 'Email');
                } else {
                    showLoginError('Invalid email or password. Demo: email@test.com / password123');
                }
            });

            document.getElementById('register-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const email = formData.get('reg-email');
                const password = formData.get('reg-password');
                
                if (!email || !password) {
                    showRegisterError('Please fill in all fields.');
                    return;
                }

                if (password.length < 6) {
                    showRegisterError('Password must be at least 6 characters long.');
                    return;
                }

                if (USERS.find(u => u.email === email)) {
                    showRegisterError('An account with this email already exists. Please login.');
                    return;
                }

                const newUser = { email, password };
                USERS.push(newUser);
                localStorage.setItem('users', JSON.stringify(USERS));
                showRegisterSuccess(email, password);
            });

            document.getElementById('register-link').addEventListener('click', function(e) {
                e.preventDefault();
                openRegisterModal();
            });

            document.getElementById('login-link').addEventListener('click', function(e) {
                e.preventDefault();
                openLoginModal();
            });

            // RSVP and Contact Forms (keeping logic as is)
            // ... (omitted for brevity, but include full logic in actual code)

            if (isLoggedIn()) {
                sections.home.style.display = 'block';
            }
        });
    </script>
</body>
</html>
